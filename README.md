# Starting with AWS

This file will document how to start a server within AWS, how to access it and how to add files to it

### Starting a VM - EC2

Make sure you are on Ireland server

 - Launch Instance

1) Choose AMI (Operating system)
  - Most familiar with Ubuntu

2) Choose Instance Type
Can choose various processing/ram power.
  - t2.micro

3) Configure Instance
Various configuring options that we don't need yet.
  - Network: Make sure is set to DevOpsStudents
  - Subnet: make sure is set to DevOpsStudentsSubnet
  - Enable Auto-Assign Public IP

4) Add storage
How much storage your vm needs
  - 8 is more than enough

5) Add Tags
Adding keys/values to make it easier to search for you VM within the server
  - Key: start with capital letter
    - i.e. Name
  - Value: separate with -
    - i.e. elliot-eng54

6) Configure Security Group
Defines who has access to your vm
AWS saves already configured groups
  - for personal access:
    - Port ranges: 22, 80, 8080, 443, 3000
    - All on personal ip

7) Keys
gives you a key to grant access
use `mv <filename>` to move from downloads to .ssh

### Accessing your VM

`ssh -i ~/.ssh/elliot-eng54.pem ubuntu@xx.xxx.xxx.xxx`

~/.ssh/elliot-eng54.pem is the location of the key generated by AWS

xx is the public ip of the server


### Adding Files/Folders

`scp -i ~/.ssh/elliot-eng54.pem ~/code/opscode/starter\ code/starter_code/environment/app/provision.sh ubuntu@34.254.153.160:/home/ubuntu/environment/app/provision.sh`

`-i` is for a file

`-r` is for a folder

`~/.ssh/elliot-eng54.pem` location of AWS generated key

`~/code/opscode/starter\ code/starter_code/environment/app/provision.sh` location of the file/folder you want to upload

`ubuntu@34.254.153.160` your vm

`:/home/ubuntu/environment/app/provision.sh` location of where you want the file saved

### rsync

great for moving large amount of files to the cloud

`rsync -av — progress -e “ssh -i /path_to/your_public_key.pem/” /absolute_path_to/local_files/ remote_server_root@public_DNS:/absolut_path/remote_directory_destination`

`rsync`: Hello, I want to use rsync!

`av`: This is the recursive rsync command.

`— progress`: This gives you a verbose print-out.

`-e “ssh -i /path_to/your_public_key.pem/”`: This gives you permissions to write to your remote instance. Depending on how you have configured you private key, you may not need this. Make sure the quotes are the true ascii character. I ran into trouble when copy-pasting the command from a notes app that converted the quote to a different character.

`/absolute_path_to/local_files/`: Including the trailing “/” makes a difference. Without the trailing slash the directory will be copied completely. With the trailing slash, the directory will not be copied, and all the files will be synced directly into the remote directory you specify.

remote_server_root@public_DNS: This is your remote server.

`:/absolut_path/remote_directory_destination`: And finally, the destination for your files on your remote server.
:taco:
